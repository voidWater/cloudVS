{"version":3,"sources":["webpack:///D:/demo/cloudVS/components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue?cdee","webpack:///D:/demo/cloudVS/components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue?7148","webpack:///D:/demo/cloudVS/components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue?c741","webpack:///D:/demo/cloudVS/components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue?f7b0","uni-app:///components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue","webpack:///D:/demo/cloudVS/components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue?bf8e"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","props","polygons","type","default","points","latitude","longitude","strokeWidth","strokeColor","fillColor","qqmapsdkKey","base_url","sig","data","canConfirm","animateLocation","isChangeSelectItem","searchKey","position","searchlist","mounted","qqmapsdk","key","BASE_URL","needRegetLocation","that","uni","cacheTimeout","accuracy","isHighAccuracy","success","console","expireTime","fail","methods","init","handleRegionchangeTimmer","renderList","mapContext","location","get_poi","poi_options","isSelect","setTimeout","searchPosition","keyword","changeSelectItem","temp","handleRegionchange","clearTimeout","isPointInPolygon","confirmSelect","val"],"mappings":"6JAAA,oIACIA,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,mEACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,yHAAqoB,eAAG,G,+HCkCxoB,I,WADA,SACA,EACA,CACAC,OACAC,UACAC,WACAC,SACA,CACAC,QACA,CACAC,qBACAC,wBAEA,CACAD,qBACAC,wBAEA,CACAD,oBACAC,wBAEA,CACAD,qBACAC,yBAGAC,cACAC,wBACAC,uBAEA,CACAL,QACA,CACAC,qBACAC,wBAEA,CACAD,qBACAC,wBACA,CACAD,qBACAC,yBAGAC,cACAC,wBACAC,yBAIAC,aACAR,YACAC,YAEAQ,UACAT,YACAC,YAEAS,KACAV,YACAC,aAGAU,gBACA,OACAC,cACAC,mBACAC,sBACAC,aACAC,UACAb,qBACAC,uBAEAa,gBAGAC,mBACA,yBAIAC,SACAC,qBACAC,yBAEA,WACA,KAEA,0CACA,yDACA,mCACAC,KACAC,wCACAA,0CACAA,UAGA,GACAC,eACAC,eACAC,gBACA1B,aACA2B,kBACAC,oBACAC,eACAN,+BACAA,iCACAC,qDACAM,sCACAd,UACAb,oBACAC,0BAGAmB,UAEAQ,iBACAF,uBAvCAA,iGAiDAG,SACAC,gBAAA,WACA,wBACAC,yBACA,iBACA,MAEAC,sBACA,WACA,uCACAC,qBACAR,oBACA,OACAS,oCACAC,UACAC,0BACA7B,UACAkB,oBAEA,SACA,0BAEAL,gDACA,6CACAA,8BACAA,6BACA,oCACA,iHACAA,iCACA,IACAA,gCACAiB,OAMAC,uBACAlB,uBACA,KAGAA,iBAKAQ,iBACAF,iBAGA,oCACA,MAEA,mBACA,MAEAV,yBAKAuB,0BACA,yCAGA,WACA,GACAC,uBACAN,UACAlC,gCACAC,mCAEAM,UACAkB,oBACA,SACA,0BAEAL,yCACA,6CACAA,8BACAA,6BACA,oCACA,iHACAA,iCACA,IACAA,gCACAA,uDACAA,wDACAiB,QAQAjB,kBAMA,oCACA,MAEA,mBACA,MAGAJ,cAEAyB,6BACA,gDACA,SACA,sCACAC,iCAEA,OACAA,YACA,2BACA,sCACA,wCAEAA,YAEA,uCAIAC,+BAAA,WAGA,GAFAjB,eACA,wBACA,eACA,2BAIA,YAHAY,uBACA,0BACA,KAGA,wBACA,GACAM,gBAEAb,yBACA,iBACA,OAMAc,iCACA,UA4CAC,yBAAA,WACA,iBACA,qCACA,WACAC,kBACA,kCACA,4DACAA,0BAGA1B,4DACA,6CAOA,c,6DCvXA,yHAAwsC,eAAG,G","file":"components/liupishui-pickerpolygons/liupishui-pickerpolygons.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./liupishui-pickerpolygons.vue?vue&type=template&id=284c7544&scoped=true&\"\nvar renderjs\nimport script from \"./liupishui-pickerpolygons.vue?vue&type=script&lang=js&\"\nexport * from \"./liupishui-pickerpolygons.vue?vue&type=script&lang=js&\"\nimport style0 from \"./liupishui-pickerpolygons.vue?vue&type=style&index=0&id=284c7544&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"284c7544\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./liupishui-pickerpolygons.vue?vue&type=template&id=284c7544&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./liupishui-pickerpolygons.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./liupishui-pickerpolygons.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"box-picker_position\">\r\n\t\t<view class=\"map_wp\">\r\n\t\t\t<map id=\"map_20221212\" class=\"picker-map\" scale=\"12\" min-scale=\"12\" @regionchange=\"handleRegionchange\" :latitude=\"position.latitude\" :longitude=\"position.longitude\" show-location='true' :polygons=\"polygons\"></map>\r\n\t\t\t<view :class=\"['picker_map_location', animateLocation?'animated':'']\"></view>\r\n\t\t</view>\r\n\t\t<view class=\"list-picker_position\">\r\n\t\t\t<view class=\"hd\">\r\n\t\t\t\t<input type=\"text\" v-model=\"searchKey\" class=\"input_text\" placeholder=\"请输入搜索地点\">\r\n\t\t\t\t<button class=\"btn-search\" type=\"default\" @click=\"searchPosition\"><view class=\"picker-search\"></view>搜索</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bd\">\r\n\t\t\t\t<view v-for=\"(item,index) in searchlist\" @click=\"changeSelectItem(index)\" class='item' :key=\"index\">\r\n\t\t\t\t\t<view class=\"item-l\">\r\n\t\t\t\t\t\t<view class=\"picker-address\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-c\">\r\n\t\t\t\t\t\t<view class=\"title\">{{item.title}}</view>\r\n\t\t\t\t\t\t<view class=\"address\">{{item.address}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-r\">\r\n\t\t\t\t\t\t<view v-if=\"item.select\" class=\"picker-checked\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"ft\">\r\n\t\t\t\t<button @click=\"confirmSelect\" :class=\"['btn-selected', canConfirm?'':'disabled']\">确定选点</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar QQMapWX = require('./qqmap-wx-jssdk.js');\r\n\tvar qqmapsdk,handleRegionchangeTimmer;\r\n\texport default {\r\n\t\tprops:{\r\n\t\t\tpolygons:{\r\n\t\t\t\ttype:Array,\r\n\t\t\t\tdefault:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpoints:[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatitude:'36.829066',\r\n\t\t\t\t\t\t\t\tlongitude:'118.025761',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatitude:'36.825012',\r\n\t\t\t\t\t\t\t\tlongitude:'118.066702',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatitude:'36.81161',\r\n\t\t\t\t\t\t\t\tlongitude:'118.042681'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatitude:'36.801964',\r\n\t\t\t\t\t\t\t\tlongitude:'118.034875',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tstrokeWidth:1,\r\n\t\t\t\t\t\tstrokeColor:'#ff000066',\r\n\t\t\t\t\t\tfillColor:'#ff000016'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpoints:[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatitude:'36.817369',\r\n\t\t\t\t\t\t\t\tlongitude:'118.001311',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlatitude:'36.808682',\r\n\t\t\t\t\t\t\t\tlongitude:'118.010281',\r\n\t\t\t\t\t\t\t},{\r\n\t\t\t\t\t\t\t\tlatitude:'36.805555',\r\n\t\t\t\t\t\t\t\tlongitude:'117.996537',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tstrokeWidth:1,\r\n\t\t\t\t\t\tstrokeColor:'#ff000066',\r\n\t\t\t\t\t\tfillColor:'#ff000016'\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\tqqmapsdkKey:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:''\r\n\t\t\t},\r\n\t\t\tbase_url:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:''\r\n\t\t\t},\r\n\t\t\tsig:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:''\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcanConfirm: true,\r\n\t\t\t\tanimateLocation:false,\r\n\t\t\t\tisChangeSelectItem:false,\r\n\t\t\t\tsearchKey:'',\r\n\t\t\t\tposition:{\r\n\t\t\t\t\tlatitude:'36.811995',\r\n\t\t\t\t\tlongitude:'118.05539'\r\n\t\t\t\t},\r\n\t\t\t\tsearchlist:[]\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tif(this.qqmapsdkKey==''){\r\n\t\t\t\tconsole.error('需要腾讯地图开发Key，申请地址：https://lbs.qq.com/miniProgram/jsSdk/jsSdkGuide/jsSdkOverview')\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tqqmapsdk = new QQMapWX({\r\n\t\t\t\tkey:this.qqmapsdkKey,\r\n\t\t\t\tBASE_URL:this.base_url\r\n\t\t\t});\r\n\t\t\tlet that = this;\r\n\t\t\tlet needRegetLocation = true;\r\n\t\t\t\r\n\t\t\tif(uni.getStorageSync('mapPickerPosition')){\r\n\t\t\t\tlet data = JSON.parse(uni.getStorageSync('mapPickerPosition'));\r\n\t\t\t\tif(new Date().getTime() < data.expireTime){\r\n\t\t\t\t\tneedRegetLocation = false;\r\n\t\t\t\t\tthat.position.latitude = data.position.latitude;\r\n\t\t\t\t\tthat.position.longitude = data.position.longitude;\r\n\t\t\t\t\tthat.init();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(needRegetLocation){\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\tcacheTimeout:1,\r\n\t\t\t\t\taccuracy:'best',\r\n\t\t\t\t\ttype:'gcj02',\r\n\t\t\t\t\tisHighAccuracy:true,\r\n\t\t\t\t\tsuccess:function(e){\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\tthat.position.latitude = e.latitude;\r\n\t\t\t\t\t\tthat.position.longitude = e.longitude;\r\n\t\t\t\t\t\tuni.setStorageSync('mapPickerPosition',JSON.stringify({\r\n\t\t\t\t\t\t\texpireTime: new Date().getTime() - 0 + 60*1000,\r\n\t\t\t\t\t\t\tposition:{\r\n\t\t\t\t\t\t\t\tlatitude: e.latitude,\r\n\t\t\t\t\t\t\t\tlongitude: e.longitude\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}))\r\n\t\t\t\t\t\tthat.init();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(e){\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// uni.onLocationChange(function(e){\r\n\t\t\t// \t\tconsole.log(11111,e);\r\n\t\t\t// \t\tthat.position.latitude = e.latitude;\r\n\t\t\t// \t\tthat.position.longitude = e.longitude;\r\n\t\t\t// \t})\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tinit(){\r\n\t\t\t\tthis.animateLocation = true;\r\n\t\t\t\thandleRegionchangeTimmer = setTimeout(()=>{\r\n\t\t\t\t\tthis.renderList();\r\n\t\t\t\t},400)\r\n\t\t\t},\r\n\t\t\trenderList(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet mapContext = uni.createMapContext(\"map_20221212\", that);\r\n\t\t\t\tmapContext.getCenterLocation({\r\n\t\t\t\t\t\tsuccess:function(rst){\r\n\t\t\t\t\t\t\tlet options = {\r\n\t\t\t\t\t\t\t\t\tlocation:rst.latitude+','+rst.longitude,\r\n\t\t\t\t\t\t\t\t\tget_poi:1,\r\n\t\t\t\t\t\t\t\t\tpoi_options: 'radius=1000',\r\n\t\t\t\t\t\t\t\t\tsig:that.sig,\r\n\t\t\t\t\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\t\t\t\t\t//console.log('xxxxx',res.result.pois)\r\n\t\t\t\t\t\t\t\t\t\tlet isSelect = false;\r\n\t\t\t\t\t\t\t\t\t\tif(res.message == \"query ok\"){\r\n\t\t\t\t\t\t\t\t\t\t\t//that.$data.searchlist = [];\r\n\t\t\t\t\t\t\t\t\t\t\tthat.$data.searchlist = [...res.result.pois];\r\n\t\t\t\t\t\t\t\t\t\t\tfor(let i = 0;i<that.$data.searchlist.length;i++){\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.$data.searchlist.useable = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.$data.searchlist.select = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor(let j = 0;j < that.polygons.length;j++){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(that.isPointInPolygon(that.$data.searchlist[i].location.lat,that.$data.searchlist[i].location.lng,that.polygons[j].points)){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$data.searchlist[i].useable = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!isSelect){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$data.searchlist[i].select = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSelect = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.animateLocation = false;\r\n\t\t\t\t\t\t\t\t\t\t\t},200)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif(isSelect){\r\n\t\t\t\t\t\t\t\t\t\t\tthat.canConfirm = true;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tthat.canConfirm = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail:function(error){\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif(typeof(window)==='undefined'){\r\n\t\t\t\t\t\t\t\tdelete options.sig;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(options.sig===''){\r\n\t\t\t\t\t\t\t\tdelete options.sig;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tqqmapsdk.reverseGeocoder(options);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsearchPosition(){\r\n\t\t\t\tif(this.searchKey.replace(/\\s+/,'')==''){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet searchOptions = {\r\n\t\t\t\t\tkeyword:this.searchKey,\r\n\t\t\t\t\tlocation:{\r\n\t\t\t\t\t\tlatitude:this.position.latitude,\r\n\t\t\t\t\t\tlongitude:this.position.longitude\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsig:that.sig,\r\n\t\t\t\t\tsuccess:function(rst){\r\n\t\t\t\t\t\tlet isSelect = false;\r\n\t\t\t\t\t\tif(rst.message == \"query ok\"){\r\n\t\t\t\t\t\t\t//that.$data.searchlist = [];\r\n\t\t\t\t\t\t\tthat.$data.searchlist = [...rst.data];\r\n\t\t\t\t\t\t\tfor(let i = 0;i<that.$data.searchlist.length;i++){\r\n\t\t\t\t\t\t\t\tthat.$data.searchlist.useable = true;\r\n\t\t\t\t\t\t\t\tthat.$data.searchlist.select = false;\r\n\t\t\t\t\t\t\t\tfor(let j = 0;j < that.polygons.length;j++){\r\n\t\t\t\t\t\t\t\t\tif(that.isPointInPolygon(that.$data.searchlist[i].location.lat,that.$data.searchlist[i].location.lng,that.polygons[j].points)){\r\n\t\t\t\t\t\t\t\t\t\tthat.$data.searchlist[i].useable = true;\r\n\t\t\t\t\t\t\t\t\t\tif(!isSelect){\r\n\t\t\t\t\t\t\t\t\t\t\tthat.$data.searchlist[i].select = true;\r\n\t\t\t\t\t\t\t\t\t\t\tthat.position.latitude = that.$data.searchlist[i].location.lat;\r\n\t\t\t\t\t\t\t\t\t\t\tthat.position.longitude = that.$data.searchlist[i].location.lng;\r\n\t\t\t\t\t\t\t\t\t\t\tisSelect = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(isSelect){\r\n\t\t\t\t\t\t\tthat.canConfirm = true;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.canConfirm = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif(typeof(window)==='undefined'){\r\n\t\t\t\t\tdelete searchOptions.sig;\r\n\t\t\t\t}\r\n\t\t\t\tif(searchOptions.sig===''){\r\n\t\t\t\t\tdelete searchOptions.sig;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tqqmapsdk.search(searchOptions);\r\n\t\t\t},\r\n\t\t\tchangeSelectItem(index){\r\n\t\t\t\tfor(let i = 0;i<this.$data.searchlist.length;i++){\r\n\t\t\t\t\tlet temp = {};\r\n\t\t\t\t\tfor(var key in this.$data.searchlist[i]){\r\n\t\t\t\t\t\ttemp[key] = this.$data.searchlist[i][key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(i===index){\r\n\t\t\t\t\t\ttemp.select = true;\r\n\t\t\t\t\t\tthis.isChangeSelectItem = true;\r\n\t\t\t\t\t\tthis.position.latitude = temp.location.lat;\r\n\t\t\t\t\t\tthis.position.longitude = temp.location.lng;\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttemp.select = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$set(this.$data.searchlist,i,temp);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\thandleRegionchange(e){\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tthis.animateLocation = false;\r\n\t\t\t\tif(e.type=='end'){\r\n\t\t\t\t\tif(this.isChangeSelectItem){\r\n\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\tthis.isChangeSelectItem = false;\r\n\t\t\t\t\t\t},100)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.animateLocation = true;\r\n\t\t\t\t\t\t\tif(handleRegionchangeTimmer){\r\n\t\t\t\t\t\t\t\tclearTimeout(handleRegionchangeTimmer);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\thandleRegionchangeTimmer = setTimeout(()=>{\r\n\t\t\t\t\t\t\t\tthis.renderList();\r\n\t\t\t\t\t\t\t},400)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tisPointInPolygon(aLat, aLon, pointList){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t/* \r\n\t\t\t            :param aLon: double 经度 \r\n\t\t\t            :param aLat: double 纬度 \r\n\t\t\t            :param pointList: list [{latitude: 22.22, longitude: 113.113}...] 多边形点的顺序需根据顺时针或逆时针，不能乱 \r\n\t\t\t            */\r\n\t\t\t            var iSum = 0  \r\n\t\t\t            var iCount = pointList.length\r\n\t\t\t              \r\n\t\t\t            if(iCount < 3) {\r\n\t\t\t                return false \r\n\t\t\t            }\r\n\t\t\t            //  待判断的点(x, y) 为已知值\r\n\t\t\t            var y = aLat\r\n\t\t\t            var x = aLon\r\n\t\t\t            for(var i = 0; i < iCount; i++) {\r\n\t\t\t                var y1 = pointList[i].latitude\r\n\t\t\t                var x1 = pointList[i].longitude\r\n\t\t\t                if(i == iCount - 1) {\r\n\t\t\t                    var y2 = pointList[0].latitude\r\n\t\t\t                    var x2 = pointList[0].longitude\r\n\t\t\t                } else {\r\n\t\t\t                    var y2 = pointList[i + 1].latitude  \r\n\t\t\t                    var x2 = pointList[i + 1].longitude\r\n\t\t\t                }\r\n\t\t\t                // 当前边的 2 个端点分别为 已知值(x1, y1), (x2, y2)\r\n\t\t\t\t\t\t\tif (((y >= y1) && (y < y2)) || ((y >= y2) && (y < y1))) {\r\n\t\t\t                    //  y 界于 y1 和 y2 之间\r\n\t\t\t                    //  假设过待判断点(x, y)的水平直线和当前边的交点为(x_intersect, y_intersect)，有y_intersect = y\r\n\t\t\t                    // 则有（2个相似三角形，公用顶角，宽/宽 = 高/高）：|x1 - x2| / |x1 - x_intersect| = |y1 - y2| / |y1 - y|\r\n\t\t\t                    if (Math.abs(y1 - y2) > 0) {\r\n\t\t\t                        var x_intersect = x1 - ((x1 - x2) * (y1 - y)) / (y1 - y2);  \r\n\t\t\t                        if(x_intersect < x) {\r\n\t\t\t                            iSum += 1 \r\n\t\t\t                        }\r\n\t\t\t                    }\r\n\t\t\t                } \r\n\t\t\t            }\r\n\t\t\t            if(iSum % 2 != 0) { //true就是在\r\n\t\t\t                return true  \r\n\t\t\t            }else { //false就是不在\r\n\t\t\t                return false \r\n\t\t\t            }  \r\n\t\t\t\t},\r\n\t\t\t\tconfirmSelect(){\r\n\t\t\t\t\tif(this.canConfirm){\r\n\t\t\t\t\t\tthis.searchlist.forEach(val=>{\r\n\t\t\t\t\t\t\tif(val.select){\r\n\t\t\t\t\t\t\t\tval.polygonIndex = [];\r\n\t\t\t\t\t\t\t\tthis.polygons.forEach((polygon,index)=>{\r\n\t\t\t\t\t\t\t\t\tif(this.isPointInPolygon(val.location.lat,val.location.lng,polygon.points)){\r\n\t\t\t\t\t\t\t\t\t\tval.polygonIndex.push(index);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('polygonLocationPicker',JSON.stringify(val));\r\n\t\t\t\t\t\t\t\tthis.$emit('selected',JSON.stringify(val));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t@keyframes bounceInDown {\r\n\t\t   from,\r\n\t\t    20%,\r\n\t\t    53%,\r\n\t\t    to {\r\n\t\t      animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\r\n\t\t      transform: translate3d(0, 0, 0);\r\n\t\t    }\r\n\t\t  \r\n\t\t    40%,\r\n\t\t    43% {\r\n\t\t      animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\r\n\t\t      transform: translate3d(0, -30rpx, 0) scaleY(1.1);\r\n\t\t    }\r\n\t\t  \r\n\t\t    70% {\r\n\t\t      animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);\r\n\t\t      transform: translate3d(0, -15rpx, 0) scaleY(1.05);\r\n\t\t    }\r\n\t\t  \r\n\t\t    80% {\r\n\t\t      transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);\r\n\t\t      transform: translate3d(0, 0, 0) scaleY(0.95);\r\n\t\t    }\r\n\t\t  \r\n\t\t    90% {\r\n\t\t      transform: translate3d(0, -4rpx, 0) scaleY(1.02);\r\n\t\t    }\r\n\t  }\r\n\t\r\n\t.box-picker_position{\r\n\t\theight: 100%;\r\n\t\twidth: 100%;\r\n\t\tbackground: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\t.map_wp{\r\n\t\tposition: relative;\r\n\t\twidth: 750rpx;\r\n\t\theight: 400rpx;\r\n\t}\r\n\t.picker_map_location{\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground-image: url(\"data:image/svg+xml,%3Csvg t='1670988557938' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='3498' width='200' height='200'%3E%3Cpath d='M511.968 0c-207.84 0-376.96 169.12-376.96 376.992 0 54.208 11.104 105.984 32.96 153.888 94.24 206.24 274.976 424 328.128 485.824 3.968 4.608 9.792 7.296 15.904 7.296s11.904-2.656 15.904-7.296c53.12-61.824 233.856-279.552 328.128-485.824 21.888-47.904 32.96-99.648 32.96-153.888-0.032-207.872-169.152-376.992-376.992-376.992zM511.968 572.8c-107.968 0-195.808-87.84-195.808-195.808s87.84-195.84 195.808-195.84 195.808 87.84 195.808 195.84c0 107.968-87.84 195.808-195.808 195.808z' fill='%23fa3c23' p-id='3499'%3E%3C/path%3E%3C/svg%3E\");\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: center bottom;\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttop: 50%;\r\n\t\tmargin-left: -30rpx;\r\n\t\tmargin-top: -60rpx;\r\n\t\tz-index: 999;\r\n\t\ttransform-origin: center bottom;\r\n\t}\r\n\t.picker_map_location.animated{\r\n\t\tanimation: bounceInDown .6s linear infinite;\r\n\t}\r\n\t.picker-map{\r\n\t\twidth: 750rpx;\r\n\t\theight: 400rpx;\r\n\t}\r\n\t.list-picker_position{\r\n\t\tposition: relative;\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-flow: column;\r\n\t\toverflow: hidden;\r\n\t\t.hd{\r\n\t\t\tpadding: 20rpx 20rpx 10rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\t.input_text{\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tbox-sizing: border-box;\r\n\t\t\t\tbackground: #f2f2f2;\r\n\t\t\t\tborder-radius: 6rpx;\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tpadding-left: 1em;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.bd{\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tflex: 1;\r\n\t\t\toverflow-y: scroll;\r\n\t\t\t.item{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tpadding: 15rpx 10rpx;\r\n\t\t\t\tborder-bottom: 1px solid #ccc;\r\n\t\t\t\tline-height: 1.92;\r\n\t\t\t\talign-items: stretch;\r\n\t\t\t\t.title{\r\n\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.address{\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\tline-height: 1.5;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.item-l{\r\n\t\t\t\tpadding: 10rpx 6rpx 0 0;\r\n\t\t\t}\r\n\t\t\t.item-c{\r\n\t\t\t\tflex: 1;\r\n\t\t\t}\r\n\t\t\t.item-r{\r\n\t\t\t\twidth: 60rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\talign-content: center;\r\n\t\t\t}\r\n\t\t\t.item.disabled{\r\n\t\t\t\topacity: .5;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.btn-search{\r\n\t\tbackground: #41a863;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #fff;\r\n\t\tdisplay: flex;\r\n\t\tpadding: 0;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\twidth: 120rpx;\r\n\t}\r\n\t.picker-search{\r\n\t\tbackground-image: url(\"data:image/svg+xml,%3Csvg t='1670900132396' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='2679' width='200' height='200'%3E%3Cpath d='M685.6 660.336l155.152 155.168a16 16 0 0 1 0 22.624l-11.312 11.328a16 16 0 0 1-22.624 0l-158.528-158.544a289.792 289.792 0 0 1-165.152 51.36C322.336 742.256 192 611.904 192 451.12 192 290.336 322.336 160 483.136 160c160.784 0 291.12 130.336 291.12 291.136 0 82.112-33.984 156.272-88.672 209.2z m-202.464 33.92c134.272 0 243.12-108.848 243.12-243.12C726.256 316.848 617.408 208 483.136 208 348.848 208 240 316.848 240 451.136c0 134.272 108.848 243.12 243.136 243.12z' p-id='2680' fill='%23dbdbdb'%3E%3C/path%3E%3C/svg%3E\");\t\t\tbackground-size: cover;\r\n\t\tbackground-size: cover;\r\n\t\twidth:36rpx;\r\n\t\theight: 36rpx;\r\n\t\twidth: 36rpx;\r\n\t\tdisplay: block;\r\n\t\tmargin-right: 5rpx;\r\n\t}\r\n\t.picker-checked{\r\n\t\tbackground-image: url(\"data:image/svg+xml,%3Csvg t='1670909673260' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='3763' width='200' height='200'%3E%3Cpath d='M417.185185 768c-9.481481 0-18.962963-3.792593-26.548148-11.377778l-246.518518-246.518518c-15.17037-15.17037-15.17037-37.925926 0-53.096297 15.17037-15.17037 37.925926-15.17037 53.096296 0L417.185185 676.977778l409.6-409.6c15.17037-15.17037 37.925926-15.17037 53.096296 0 15.17037 15.17037 15.17037 37.925926 0 53.096296l-436.148148 436.148148c-7.585185 7.585185-17.066667 11.377778-26.548148 11.377778z' p-id='3764' fill='%231e63ed'%3E%3C/path%3E%3C/svg%3E\");\r\n\t\tbackground-size: cover;\r\n\t\twidth: 46rpx;\r\n\t\theight: 46rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t.picker-address{\r\n\t\tbackground-image: url(\"data:image/svg+xml,%3Csvg t='1670910118471' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='4833' width='200' height='200'%3E%3Cpath d='M508.313 1018.666c0 0-379.51-422.921-379.51-632.516 0-209.606 169.914-379.51 379.51-379.51s379.511 169.903 379.51 379.51c0 209.596-379.51 632.516-379.51 632.516zM508.313 55.295c-182.719 0-330.854 150.305-330.854 335.72s330.854 559.534 330.854 559.534 330.854-374.117 330.854-559.534c0-185.415-148.135-335.72-330.854-335.72zM508.312 512.654c-87.336 0-158.129-70.793-158.129-158.129s70.793-158.129 158.129-158.129 158.129 70.793 158.129 158.129c0 87.328-70.793 158.129-158.129 158.129zM508.313 240.185c-64.488 0-116.772 52.285-116.772 116.772s52.285 116.772 116.772 116.772c64.498 0 116.772-52.285 116.772-116.772 0-64.488-52.275-116.772-116.772-116.772z' fill='%23666666' p-id='4834'%3E%3C/path%3E%3C/svg%3E\");\r\n\t\tbackground-size: cover;\r\n\t\twidth: 36rpx;\r\n\t\theight: 36rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\t.btn-selected{\r\n\t\tbackground: #41a863;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #fff;\r\n\t\tborder: none;\r\n\t\tborder-radius: 0;\r\n\t}\r\n\t.btn-selected.disabled{\r\n\t\tbackground: #f2f2f2;\r\n\t\tcolor: #ccc;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./liupishui-pickerpolygons.vue?vue&type=style&index=0&id=284c7544&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./liupishui-pickerpolygons.vue?vue&type=style&index=0&id=284c7544&scoped=true&lang=scss&\""],"sourceRoot":""}