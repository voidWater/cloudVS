(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/liupishui-pickerpolygons/liupishui-pickerpolygons"],{390:function(t,e,i){"use strict";i.r(e);var n=i(391),o=i(393);for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i(396);var a,l=i(45),r=Object(l["default"])(o["default"],n["render"],n["staticRenderFns"],!1,null,"284c7544",null,!1,n["components"],a);r.options.__file="components/liupishui-pickerpolygons/liupishui-pickerpolygons.vue",e["default"]=r.exports},391:function(t,e,i){"use strict";i.r(e);var n=i(392);i.d(e,"render",(function(){return n["render"]})),i.d(e,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(e,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(e,"components",(function(){return n["components"]}))},392:function(t,e,i){"use strict";var n;i.r(e),i.d(e,"render",(function(){return o})),i.d(e,"staticRenderFns",(function(){return a})),i.d(e,"recyclableRender",(function(){return s})),i.d(e,"components",(function(){return n}));var o=function(){var t=this,e=t.$createElement;t._self._c},s=!1,a=[];o._withStripped=!0},393:function(t,e,i){"use strict";i.r(e);var n=i(394),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},394:function(t,e,i){"use strict";(function(t){var n=i(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,s,a=n(i(18)),l=i(395),r={props:{polygons:{type:Array,default:[{points:[{latitude:"36.829066",longitude:"118.025761"},{latitude:"36.825012",longitude:"118.066702"},{latitude:"36.81161",longitude:"118.042681"},{latitude:"36.801964",longitude:"118.034875"}],strokeWidth:1,strokeColor:"#ff000066",fillColor:"#ff000016"},{points:[{latitude:"36.817369",longitude:"118.001311"},{latitude:"36.808682",longitude:"118.010281"},{latitude:"36.805555",longitude:"117.996537"}],strokeWidth:1,strokeColor:"#ff000066",fillColor:"#ff000016"}]},qqmapsdkKey:{type:String,default:""},base_url:{type:String,default:""},sig:{type:String,default:""}},data:function(){return{canConfirm:!0,animateLocation:!1,isChangeSelectItem:!1,searchKey:"",position:{latitude:"36.811995",longitude:"118.05539"},searchlist:[]}},mounted:function(){if(""!=this.qqmapsdkKey){o=new l({key:this.qqmapsdkKey,BASE_URL:this.base_url});var e=this,i=!0;if(t.getStorageSync("mapPickerPosition")){var n=JSON.parse(t.getStorageSync("mapPickerPosition"));(new Date).getTime()<n.expireTime&&(i=!1,e.position.latitude=n.position.latitude,e.position.longitude=n.position.longitude,e.init())}i&&t.getLocation({cacheTimeout:1,accuracy:"best",type:"gcj02",isHighAccuracy:!0,success:function(i){console.log(i),e.position.latitude=i.latitude,e.position.longitude=i.longitude,t.setStorageSync("mapPickerPosition",JSON.stringify({expireTime:(new Date).getTime()-0+6e4,position:{latitude:i.latitude,longitude:i.longitude}})),e.init()},fail:function(t){console.log(t)}})}else console.error("需要腾讯地图开发Key，申请地址：https://lbs.qq.com/miniProgram/jsSdk/jsSdkGuide/jsSdkOverview")},methods:{init:function(){var t=this;this.animateLocation=!0,s=setTimeout((function(){t.renderList()}),400)},renderList:function(){var e=this,i=t.createMapContext("map_20221212",e);i.getCenterLocation({success:function(t){var i={location:t.latitude+","+t.longitude,get_poi:1,poi_options:"radius=1000",sig:e.sig,success:function(t){var i=!1;if("query ok"==t.message){e.$data.searchlist=(0,a.default)(t.result.pois);for(var n=0;n<e.$data.searchlist.length;n++){e.$data.searchlist.useable=!0,e.$data.searchlist.select=!1;for(var o=0;o<e.polygons.length;o++)e.isPointInPolygon(e.$data.searchlist[n].location.lat,e.$data.searchlist[n].location.lng,e.polygons[o].points)&&(e.$data.searchlist[n].useable=!0,i||(e.$data.searchlist[n].select=!0,i=!0))}setTimeout((function(){e.animateLocation=!1}),200)}e.canConfirm=!0},fail:function(t){console.log(t)}};"undefined"===typeof window&&delete i.sig,""===i.sig&&delete i.sig,o.reverseGeocoder(i)}})},searchPosition:function(){if(""!=this.searchKey.replace(/\s+/,"")){var t=this,e={keyword:this.searchKey,location:{latitude:this.position.latitude,longitude:this.position.longitude},sig:t.sig,success:function(e){var i=!1;if("query ok"==e.message){t.$data.searchlist=(0,a.default)(e.data);for(var n=0;n<t.$data.searchlist.length;n++){t.$data.searchlist.useable=!0,t.$data.searchlist.select=!1;for(var o=0;o<t.polygons.length;o++)t.isPointInPolygon(t.$data.searchlist[n].location.lat,t.$data.searchlist[n].location.lng,t.polygons[o].points)&&(t.$data.searchlist[n].useable=!0,i||(t.$data.searchlist[n].select=!0,t.position.latitude=t.$data.searchlist[n].location.lat,t.position.longitude=t.$data.searchlist[n].location.lng,i=!0))}}t.canConfirm=!0}};"undefined"===typeof window&&delete e.sig,""===e.sig&&delete e.sig,o.search(e)}},changeSelectItem:function(t){for(var e=0;e<this.$data.searchlist.length;e++){var i={};for(var n in this.$data.searchlist[e])i[n]=this.$data.searchlist[e][n];e===t?(i.select=!0,this.isChangeSelectItem=!0,this.position.latitude=i.location.lat,this.position.longitude=i.location.lng):i.select=!1,this.$set(this.$data.searchlist,e,i)}},handleRegionchange:function(t){var e=this;if(console.log(t),this.animateLocation=!1,"end"==t.type){if(this.isChangeSelectItem)return void setTimeout((function(){e.isChangeSelectItem=!1}),100);this.animateLocation=!0,s&&clearTimeout(s),s=setTimeout((function(){e.renderList()}),400)}},isPointInPolygon:function(t,e,i){return!0},confirmSelect:function(){var e=this;this.canConfirm&&this.searchlist.forEach((function(i){i.select&&(i.polygonIndex=[],e.polygons.forEach((function(t,n){e.isPointInPolygon(i.location.lat,i.location.lng,t.points)&&i.polygonIndex.push(n)})),t.setStorageSync("polygonLocationPicker",JSON.stringify(i)),e.$emit("selected",JSON.stringify(i)))}))}}};e.default=r}).call(this,i(2)["default"])},396:function(t,e,i){"use strict";i.r(e);var n=i(397),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},397:function(t,e,i){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/liupishui-pickerpolygons/liupishui-pickerpolygons.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/liupishui-pickerpolygons/liupishui-pickerpolygons-create-component',
    {
        'components/liupishui-pickerpolygons/liupishui-pickerpolygons-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(390))
        })
    },
    [['components/liupishui-pickerpolygons/liupishui-pickerpolygons-create-component']]
]);
